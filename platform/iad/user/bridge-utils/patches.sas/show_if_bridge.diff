---
 brctl/brctl_cmd.c  |   29 +++++++++++++++++++++++++++++
 brctl/brctl_disp.c |   27 +++++++++++++++++++++++++--
 2 files changed, 54 insertions(+), 2 deletions(-)

--- a/brctl/brctl_cmd.c
+++ b/brctl/brctl_cmd.c
@@ -336,6 +336,23 @@ static int show_bridge(const char *name,
 	return 0;
 }
 
+static int show_if_bridge(const char *name, void *arg)
+{
+	struct bridge_info info;
+
+	fflush(stdout);
+
+	if (br_get_bridge_info(name, &info)) {
+		fprintf(stderr, "can't get info %s\n",
+				strerror(errno));
+		return 1;
+	}
+	
+	br_dump_interface_list_if (name, arg);
+
+	return 0;
+}
+
 static int br_cmd_show(int argc, char *const* argv)
 {
 	printf("bridge name\tbridge id\t\tSTP enabled\tinterfaces\n");
@@ -343,6 +360,16 @@ static int br_cmd_show(int argc, char *c
 	return 0;
 }
 
+static int br_cmd_show_if_bridge(int argc, char *const* argv)
+{
+	printf("search bridge of given if\n");
+
+	br_foreach_bridge(show_if_bridge, (void*)argv[1]);
+	return 0;
+}
+
+
+
 static int compare_fdbs(const void *_f0, const void *_f1)
 {
 	const struct fdb_entry *f0 = _f0;
@@ -423,6 +450,8 @@ static const struct command commands[] =
 	  "<bridge>\t\tshow bridge stp info"},
 	{ 2, "stp", br_cmd_stp,
 	  "<bridge> {on|off}\tturn stp on/off" },
+	{ 1, "ifbr", br_cmd_show_if_bridge, "<if>\tshow bridge of given interface" },
+
 };
 
 const struct command *command_lookup(const char *cmd)
--- a/brctl/brctl_disp.c
+++ b/brctl/brctl_disp.c
@@ -35,11 +35,19 @@ void br_show_timer(const struct timeval 
 	printf("%4i.%.2i", (int)tv->tv_sec, (int)tv->tv_usec/10000);
 }
 
-static int first;
 
-static int dump_interface(const char *b, const char *p, void *arg)
+static int dump_if_bridge (const char *b, const char *p, const char *f)
 {
+  if (strcmp(p,f) == 0)
+  {
+    printf("%s %s\n",b,p);
+  }  
+	return 0;
+}
 
+static int first;
+static int dump_interface(const char *b, const char *p, void *arg)
+{
 	if (first) 
 		first = 0;
 	else
@@ -50,6 +58,8 @@ static int dump_interface(const char *b,
 	return 0;
 }
 
+
+
 void br_dump_interface_list(const char *br)
 {
 	int err;
@@ -62,6 +72,19 @@ void br_dump_interface_list(const char *
 		printf("\n");
 }
 
+void br_dump_interface_list_if(const char *br, const char *f)
+{
+	int err;
+
+	first = 1;
+	err = br_foreach_port(br, dump_if_bridge, f);
+	if (err < 0)
+		printf(" can't get port info: %s\n", strerror(-err));
+	else
+		printf("\n");
+}
+
+
 static int dump_port_info(const char *br, const char *p,  void *arg)
 {
 	struct port_info pinfo;
