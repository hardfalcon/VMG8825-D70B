From: Daniel Egger <daniel.egger@sphairon.com>
Date: Mon, 22 Aug 2011 17:04:41 +0200
Subject: Mantis 8744: correct channel display @ iwconfig

Signed-off-by: Martin Volkmer <martin.volkmer@sphairon.com>
Signed-off-by: Daniel Egger <daniel.egger@sphairon.com>
---
 iwconfig.c |    7 ++++---
 1 files changed, 4 insertions(+), 3 deletions(-)

diff --git a/iwconfig.c b/iwconfig.c
index d01f29a..ac17d9c 100644
--- a/iwconfig.c
+++ b/iwconfig.c
@@ -226,10 +226,11 @@ display_info(struct wireless_info *	info,
       /* Some drivers insist of returning channel instead of frequency.
        * This fixes them up. Note that, driver should still return
        * frequency, because other tools depend on it. */
-      if(info->has_range && (freq < KILO))
-	channel = iw_channel_to_freq((int) freq, &freq, &info->range);
+      if(info->has_range && (freq < KILO)) {
+          channel = iw_channel_to_freq((int) freq, &freq, &info->range);
+      }
       /* Display */
-      iw_print_freq(buffer, sizeof(buffer), freq, -1, info->b.freq_flags);
+      iw_print_freq(buffer, sizeof(buffer), freq, channel, info->b.freq_flags);
       printf("%s  ", buffer);
       tokens +=4;
     }
--

